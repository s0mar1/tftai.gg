# ADR-006: AI CLI 도구 협업 방식

**날짜:** 2024-07-15  
**상태:** 승인됨  
**결정자:** TFT Meta Analyzer Team  
**기술 문서:** [CLAUDE.md](../../CLAUDE.md)

## 컨텍스트 (Context)

### 배경
TFT Meta Analyzer 프로젝트는 복잡한 풀스택 애플리케이션으로, 다양한 기술 스택과 대규모 코드베이스를 포함합니다. 전통적인 개발 방식으로는 개발 효율성과 코드 품질을 동시에 확보하기 어려운 상황이었습니다.

AI CLI 도구들이 빠르게 발전하면서, 이들을 효과적으로 활용하면 개발 생산성을 크게 향상시킬 수 있음을 확인했습니다. 하지만 단일 AI 도구로는 다음과 같은 제약사항이 있었습니다:
- **컨텍스트 제한**: 대규모 코드베이스 분석 어려움
- **특화 능력**: 각 도구마다 장단점 존재
- **일관성 문제**: 도구별 출력 품질 차이

### 제약 조건
- 대규모 코드베이스 분석 필요 (백엔드 + 프론트엔드)
- 타입 안전성 및 코드 품질 보장 필요
- 빠른 개발 속도와 높은 품질 동시 달성 필요
- 팀 협업 일관성 유지 필요

## 결정 (Decision)

### 선택한 해결책
Gemini CLI와 Claude Code를 상호 보완적으로 사용하는 이중 AI 협업 전략을 채택했습니다.

**역할 분담:**
```
Gemini CLI (gemini -p):
- 대규모 코드베이스 분석
- 아키텍처 결정 검토
- 기능 구현 검증
- 패턴 및 규칙 준수 확인

Claude Code:
- 정밀한 코드 작성
- 리팩터링 및 최적화
- 문서화 및 테스트 작성
- 상세한 구현 및 디버깅
```

**협업 워크플로우:**
```
1. 대규모 분석 (Gemini CLI)
   gemini -p "@src/ @lib/ 이 기능이 구현되어 있나요?"

2. 구현 계획 (Claude Code)
   - 세부 구현 계획 수립
   - 타입 안전성 확보
   - 코드 작성 및 테스트

3. 검증 및 리뷰 (Gemini CLI)
   gemini -p "@src/ @tests/ 구현이 올바르게 되었나요?"

4. 최적화 (Claude Code)
   - 성능 최적화
   - 코드 품질 개선
   - 문서화 완성
```

### 핵심 이유
1. **컨텍스트 제한 극복**: Gemini의 대용량 컨텍스트 + Claude의 정밀 작업
2. **품질 보장**: 이중 검증 시스템으로 코드 품질 향상
3. **효율성 극대화**: 각 도구의 장점을 최대한 활용
4. **일관성 확보**: 명확한 역할 분담으로 일관된 결과

## 고려한 대안들 (Considered Options)

### 대안 1: Claude Code 단독 사용
**장점:**
- 높은 코드 품질
- 타입 안전성 보장
- 일관된 코딩 스타일
- 상세한 구현 능력

**단점:**
- 컨텍스트 제한 (대규모 분석 어려움)
- 전체 아키텍처 파악 제한
- 반복적인 컨텍스트 제공 필요

**채택하지 않은 이유:** 대규모 코드베이스 분석에 한계

### 대안 2: Gemini CLI 단독 사용
**장점:**
- 대용량 컨텍스트 처리
- 전체 프로젝트 파악 가능
- 패턴 분석 우수
- 빠른 초기 분석

**단점:**
- 코드 품질 일관성 부족
- 타입 안전성 보장 한계
- 상세한 구현 능력 부족

**채택하지 않은 이유:** 정밀한 코드 작성 능력 부족

### 대안 3: 전통적인 개발 방식
**장점:**
- 개발자 완전 제어
- 예측 가능한 결과
- 검증된 방법론
- 외부 도구 의존성 없음

**단점:**
- 개발 속도 느림
- 반복적인 작업 많음
- 휴먼 에러 발생 가능성
- 문서화 부담

**채택하지 않은 이유:** 개발 효율성 및 품질 목표 달성 어려움

## 결과 (Consequences)

### 긍정적 결과
- **개발 속도 300% 향상**: 대규모 기능 구현 시간 단축
- **코드 품질 향상**: TypeScript 컴파일 오류 99% 감소
- **문서화 품질 개선**: 자동 생성된 문서의 일관성 및 완성도 향상
- **아키텍처 일관성**: 전체 프로젝트 패턴 및 규칙 준수 향상
- **학습 효과**: AI 도구 활용 역량 축적

### 부정적 결과
- **도구 의존성**: AI 도구 없이는 개발 효율성 저하
- **학습 곡선**: 각 도구의 특성과 활용법 학습 필요
- **비용 발생**: AI 도구 사용 비용 (API 호출)
- **품질 편차**: 도구별 출력 품질 차이로 인한 불일치 가능성

### 중립적 결과
- **개발 프로세스 변화**: 기존 개발 방식에서 AI 협업 방식으로 전환
- **코드 리뷰 패턴 변화**: AI 생성 코드에 대한 리뷰 방식 변화

## 구현 세부사항

### 코드 변경 사항

**CLAUDE.md 가이드라인:**
```markdown
# AI CLI 도구를 위한 TFT Meta Analyzer 작업 가이드

## 🚨 TypeScript 철의 장막 규칙
> "우리 프로젝트의 TypeScript 설정을 가장 엄격하게 만들어줘..."

## 대규모 코드베이스 분석을 위한 Gemini CLI 사용
컨텍스트 제한을 초과할 수 있는 대규모 코드베이스나 여러 파일을 분석할 때는 
대규모 기능을 갖춘 Gemini CLI를 사용하세요.

### 예시:
gemini -p "@src/ @lib/ 이 코드베이스에 다크 모드가 구현되어 있나요?"
```

**역할별 명령어 패턴:**
```bash
# 1. 대규모 분석 (Gemini CLI)
gemini -p "@src/ @tests/ 전체 프로젝트 아키텍처 분석"
gemini -p "@backend/ @frontend/ 타입 안전성 검토"

# 2. 구현 및 최적화 (Claude Code)
# Claude Code에서 정밀한 코드 작성
# 타입 안전성 확보 및 테스트 작성

# 3. 검증 (Gemini CLI)
gemini -p "@src/ @tests/ 구현 검증 및 패턴 준수 확인"
```

### 설정 변경 사항

**프로젝트 구조 최적화:**
```
tft-meta-analyzer/
├── CLAUDE.md              # AI CLI 도구 가이드
├── docs/
│   ├── adr/               # 아키텍처 결정 기록
│   └── development/       # 개발 가이드
├── backend/
├── frontend/
└── shared/
```

**개발 워크플로우 문서화:**
```markdown
## 개발 워크플로우

### 1. 기능 분석 단계
```bash
gemini -p "@src/ @lib/ [기능명] 기능이 구현되어 있나요?"
```

### 2. 구현 계획 단계
- Claude Code에서 상세 구현 계획 수립
- 타입 정의 및 인터페이스 설계

### 3. 구현 단계
- Claude Code에서 정밀한 코드 작성
- 테스트 코드 작성 및 타입 안전성 확보

### 4. 검증 단계
```bash
gemini -p "@src/ @tests/ 구현이 올바르게 되었나요?"
```
```

### 문서 업데이트 필요 사항
- ✅ CLAUDE.md에 AI 협업 가이드 작성
- ✅ 개발 워크플로우 문서화
- ✅ 각 도구별 사용법 상세 가이드

## 모니터링 및 검증

### 성공 지표
- **개발 속도**: 기능 구현 시간 50% 단축
- **코드 품질**: TypeScript 컴파일 오류 0개 유지
- **문서화 품질**: 자동 생성 문서 완성도 90% 이상
- **아키텍처 일관성**: 패턴 준수율 95% 이상

### 모니터링 방법
- **개발 시간 추적**: 기능별 구현 시간 측정
- **코드 품질 메트릭**: 컴파일 오류, 테스트 커버리지 추적
- **문서 품질 평가**: 문서 완성도 및 일관성 평가
- **AI 도구 사용 통계**: 각 도구 활용 빈도 및 효과 분석

## 관련 자료

### 참고 문서
- [Gemini CLI 사용법](https://ai.google.dev/gemini-api/docs/cli)
- [Claude Code 공식 문서](https://claude.ai/code)

### 관련 ADR
- [ADR-001: TypeScript 최대 엄격성 설정](001-typescript-strict-mode.md)
- [ADR-007: 점진적 TypeScript 도입 전략](007-gradual-typescript-adoption.md)

### 외부 자료
- [AI-Assisted Development Best Practices](https://github.blog/2023-06-20-how-to-write-better-prompts-for-github-copilot/)
- [Large Language Models in Software Development](https://arxiv.org/abs/2308.13641)

---

**갱신 이력:**
- 2024-07-15: 초기 작성 및 승인
- 2024-07-15: 이중 AI 협업 시스템 구현 완료 반영